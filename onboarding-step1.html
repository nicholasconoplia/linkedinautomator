<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://js.stripe.com https://fonts.googleapis.com https://cdn.tailwindcss.com; script-src-attr 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com https://cdn.tailwindcss.com; img-src 'self' data: https: http:; connect-src 'self' https://api.stripe.com; frame-src https://js.stripe.com; font-src 'self' https://fonts.gstatic.com;">
    <title>Onboarding - Welcome to Employment</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'background': '#f2f2f2',
                        'text-primary': '#333333',
                        'accent': '#0066CC',
                    },
                    fontFamily: {
                        'sans': ['Montserrat', 'sans-serif'],
                    },
                    borderRadius: {
                        'button': '8px',
                    },
                    boxShadow: {
                        'subtle': '0 2px 4px rgba(0, 0, 0, 0.1)',
                    },
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-background font-sans">
    <div class="min-h-screen bg-background">
        <!-- Header -->
        <nav class="bg-white shadow-subtle">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex">
                        <div class="flex-shrink-0 flex items-center">
                            <a href="/" class="text-accent font-bold text-xl">
                                EMPLOYMENT
                            </a>
                        </div>
                        <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                            <a href="/" class="text-text-primary hover:text-accent px-3 py-2 text-sm font-medium">
                                Dashboard
                            </a>
                            <a href="/generator.html" class="text-text-primary hover:text-accent px-3 py-2 text-sm font-medium">
                                Content Generator
                            </a>
                            <a href="/automation.html" class="text-text-primary hover:text-accent px-3 py-2 text-sm font-medium">
                                Automation
                            </a>
                            <a href="/manual-post.html" class="text-text-primary hover:text-accent px-3 py-2 text-sm font-medium">
                                Manual Post
                            </a>
                            <a href="/pricing.html" class="text-text-primary hover:text-accent px-3 py-2 text-sm font-medium">
                                Pricing
                            </a>
                        </div>
                    </div>
                    
                    <!-- Authentication buttons -->
                    <div class="flex items-center" id="authSection">
                        <div id="loginSection">
                            <a href="/auth/linkedin" class="bg-white text-text-primary px-6 py-2 rounded-button shadow-subtle hover:shadow-md transition-shadow duration-200 text-sm font-medium">
                                Connect to LinkedIn
                            </a>
                        </div>
                        
                        <div id="userSection" style="display: none;">
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center">
                                    <img id="userProfilePic" src="" alt="Profile" class="h-8 w-8 rounded-full" style="display: none;">
                                    <div class="h-8 w-8 rounded-full bg-accent flex items-center justify-center text-white" id="userInitials">
                                        U
                                    </div>
                                    <span class="ml-2 text-sm font-medium text-text-primary" id="userName">User</span>
                                </div>
                                <button data-action="logout" class="text-text-primary hover:text-accent text-sm font-medium">Sign Out</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="min-h-screen bg-background py-12 px-4 sm:px-6 lg:px-8">
            <div class="max-w-2xl mx-auto">
                <h1 class="text-5xl font-bold text-black font-sans mb-6">
                    WELCOME <span id="userName">THERE</span>
                </h1>
                
                <p class="text-lg text-text-primary mb-8">
                    Let's personalize your LinkedIn automation
                </p>

                <form id="onboardingForm" class="space-y-8">
                    <!-- Goals Section -->
                    <div>
                        <label class="block text-lg font-medium text-text-primary mb-4">
                            What's your primary goal?
                        </label>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="goal_knowledgeable"
                                    name="goals"
                                    value="Appear knowledgeable"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="goal_knowledgeable" class="ml-3 text-text-primary">
                                    Appear knowledgeable
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="goal_leads"
                                    name="goals"
                                    value="Generate leads"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="goal_leads" class="ml-3 text-text-primary">
                                    Generate leads
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="goal_interest"
                                    name="goals"
                                    value="Show interest"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="goal_interest" class="ml-3 text-text-primary">
                                    Show interest
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="goal_network"
                                    name="goals"
                                    value="Build network"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="goal_network" class="ml-3 text-text-primary">
                                    Build network
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Role Input -->
                    <div>
                        <label for="role" class="block text-lg font-medium text-text-primary mb-2">
                            Your current role/industry
                        </label>
                        <input
                            type="text"
                            id="role"
                            name="role"
                            class="w-full px-4 py-2 border border-gray-300 rounded-button focus:ring-accent focus:border-accent"
                            placeholder="e.g., Software Engineer in Tech"
                        />
                    </div>

                    <!-- Posting Frequency -->
                    <div>
                        <label class="block text-lg font-medium text-text-primary mb-4">
                            How often do you want to post?
                        </label>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <input
                                    type="radio"
                                    id="freq_multiple"
                                    name="frequency"
                                    value="multiple-day"
                                    class="h-5 w-5 text-accent border-gray-300"
                                />
                                <label for="freq_multiple" class="ml-3 text-text-primary">
                                    Multiple/day
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="radio"
                                    id="freq_once"
                                    name="frequency"
                                    value="once-per-day"
                                    checked
                                    class="h-5 w-5 text-accent border-gray-300"
                                />
                                <label for="freq_once" class="ml-3 text-text-primary">
                                    Once per day
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="radio"
                                    id="freq_three"
                                    name="frequency"
                                    value="three-per-week"
                                    class="h-5 w-5 text-accent border-gray-300"
                                />
                                <label for="freq_three" class="ml-3 text-text-primary">
                                    3√ó per week
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="radio"
                                    id="freq_custom"
                                    name="frequency"
                                    value="custom"
                                    class="h-5 w-5 text-accent border-gray-300"
                                />
                                <label for="freq_custom" class="ml-3 text-text-primary">
                                    Custom
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Content Preferences -->
                    <div>
                        <label class="block text-lg font-medium text-text-primary mb-4">
                            What type of content interests you most?
                        </label>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="content_ai"
                                    name="contentTypes"
                                    value="AI & Technology"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="content_ai" class="ml-3 text-text-primary text-sm">
                                    ü§ñ AI & Technology
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="content_leadership"
                                    name="contentTypes"
                                    value="Leadership"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="content_leadership" class="ml-3 text-text-primary text-sm">
                                    üëë Leadership
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="content_marketing"
                                    name="contentTypes"
                                    value="Marketing"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="content_marketing" class="ml-3 text-text-primary text-sm">
                                    üì± Marketing
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="content_startup"
                                    name="contentTypes"
                                    value="Entrepreneurship"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="content_startup" class="ml-3 text-text-primary text-sm">
                                    üöÄ Entrepreneurship
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="content_remote"
                                    name="contentTypes"
                                    value="Remote Work"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="content_remote" class="ml-3 text-text-primary text-sm">
                                    üè† Remote Work
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input
                                    type="checkbox"
                                    id="content_career"
                                    name="contentTypes"
                                    value="Career Development"
                                    class="h-5 w-5 text-accent border-gray-300 rounded"
                                />
                                <label for="content_career" class="ml-3 text-text-primary text-sm">
                                    üìà Career Development
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Continue Button -->
                    <button
                        type="submit"
                        class="w-full bg-accent text-white py-4 px-6 rounded-button hover:bg-opacity-90 transition-colors duration-200 font-medium"
                    >
                        Continue to Step 2
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        let employmentApp;
        
        // Initialize the app and get user name
        document.addEventListener('DOMContentLoaded', async function() {
            // Initialize EmploymentApp for authentication
            employmentApp = new EmploymentApp();
            await employmentApp.init();
            
            // Get user name from current user if available
            if (employmentApp.currentUser && employmentApp.currentUser.name) {
                const firstName = employmentApp.currentUser.name.split(' ')[0].toUpperCase();
                document.getElementById('userName').textContent = firstName;
            } else {
                // Fallback API call if needed
                try {
                    const response = await fetch('/api/user', {
                        credentials: 'include'
                    });
                    
                    if (response.ok) {
                        const user = await response.json();
                        if (user.name) {
                            const firstName = user.name.split(' ')[0].toUpperCase();
                            document.getElementById('userName').textContent = firstName;
                        }
                    }
                } catch (error) {
                    console.log('User not logged in or error fetching profile');
                    // Redirect to login if not authenticated
                    window.location.href = '/';
                }
            }
        });

        // Handle form submission
        document.getElementById('onboardingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Collect form data
            const formData = new FormData(this);
            const goals = formData.get('goals');
            const contentTypes = Array.from(formData.getAll('contentTypes'));
            const roleIndustry = formData.get('role');
            const postingFrequency = formData.get('frequency');
            
            // Validate required fields
            if (!goals) {
                alert('Please select your primary goal');
                return;
            }
            
            if (contentTypes.length === 0) {
                alert('Please select at least one content type');
                return;
            }
            
            if (!roleIndustry.trim()) {
                alert('Please enter your role/industry');
                return;
            }
            
            // Prepare step 1 data in the format expected by preferences
            const step1Data = {
                goals,
                roleIndustry,
                postingFrequency,
                contentTypes,
                personalBackground: '', // Will be filled in preferences if needed
                recentActivities: '', // Will be filled in preferences if needed
                expertiseInterests: '' // Will be filled in preferences if needed
            };
            
            // Store in localStorage for step 2
            localStorage.setItem('onboardingStep1', JSON.stringify(step1Data));
            
            // Redirect to step 2
            window.location.href = '/onboarding-step2.html';
        });
    </script>
</body>
</html> 