<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://js.stripe.com https://fonts.googleapis.com https://cdn.tailwindcss.com; script-src-attr 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com https://cdn.tailwindcss.com; img-src 'self' data: https: http:; connect-src 'self' https://api.stripe.com; frame-src https://js.stripe.com; font-src 'self' https://fonts.gstatic.com;">
    <title>Pricing - Employment</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'background': '#f2f2f2',
                        'text-primary': '#333333',
                        'accent': '#0066CC',
                    },
                    fontFamily: {
                        'sans': ['Montserrat', 'sans-serif'],
                    },
                    borderRadius: {
                        'button': '8px',
                    },
                    boxShadow: {
                        'subtle': '0 2px 4px rgba(0, 0, 0, 0.1)',
                    },
                }
            }
        }
    </script>
    
    <meta name="description" content="Choose the perfect plan for your LinkedIn content creation needs with Employment's affordable pricing options.">
    <meta name="keywords" content="LinkedIn content pricing, social media plans, content generation subscription">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <script src="script.js"></script>

    <style>
        body {
            background: #f2f2f2;
        }
        .pricing-card {
            transition: all 0.3s ease;
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid #e2e8f0;
        }
        
        .pricing-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border-color: #0b80ee;
        }
        
        .pricing-card.popular {
            border-color: #0b80ee;
            background: linear-gradient(145deg, #ffffff 0%, #eff6ff 100%);
            position: relative;
        }
        
        .pricing-card.popular::before {
            content: 'Most Popular';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #0b80ee, #1e40af);
            color: white;
            padding: 6px 24px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .price-amount {
            background: linear-gradient(135deg, #0b80ee, #1e40af);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .feature-checkmark {
            color: #10b981;
            font-weight: bold;
        }
        
        .upgrade-btn {
            background: linear-gradient(135deg, #0b80ee, #1e40af);
            transition: all 0.3s ease;
        }
        
        .upgrade-btn:hover {
            background: linear-gradient(135deg, #1e40af, #0b80ee);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(11, 128, 238, 0.3);
        }
        
        .upgrade-btn.popular {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .upgrade-btn.popular:hover {
            background: linear-gradient(135deg, #059669, #10b981);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0b80ee;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Credit Purchase Modal Styles */
        .credit-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(8px);
        }

        .credit-modal-content {
            background: white;
            margin: 10% auto;
            padding: 2rem;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            position: relative;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
            border: 1px solid #e2e8f0;
        }

        .credit-modal-close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #64748b;
            transition: color 0.2s ease;
        }

        .credit-modal-close:hover {
            color: #0f172a;
        }

        .credit-pack {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .credit-pack:hover {
            border-color: #0b80ee;
            background: #eff6ff;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(11, 128, 238, 0.15);
        }

        .credit-pack.selected {
            border-color: #0b80ee;
            background: linear-gradient(145deg, #ffffff 0%, #eff6ff 100%);
            box-shadow: 0 10px 25px rgba(11, 128, 238, 0.2);
        }

        .tab-container {
            display: flex;
            background: #f1f5f9;
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 3rem;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }

        .tab-button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #64748b;
            font-size: 14px;
        }

        .tab-button.active {
            background: white;
            color: #0f172a;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }

        .tab-button:hover:not(.active) {
            color: #0b80ee;
            background: rgba(11, 128, 238, 0.05);
        }

        .pricing-section {
            display: none;
        }

        .pricing-section.active {
            display: block;
        }

        .plan-badge {
            background: var(--accent-gradient);
            color: var(--pure-white);
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-bold);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--spacing-md);
            display: inline-block;
        }
    </style>
</head>
<body class="min-h-screen bg-background font-sans">
    <div class="min-h-screen bg-background">
        <!-- Header -->
        <nav class="bg-white shadow-subtle">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex">
                        <div class="flex-shrink-0 flex items-center">
                            <a href="/" class="text-accent font-bold text-xl">
                                EMPLOYMENT
                            </a>
                        </div>
                        <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                            <a href="/" class="text-text-primary hover:text-accent px-3 py-2 text-sm font-medium">
                                Dashboard
                            </a>
                            <a href="/generator.html" class="text-text-primary hover:text-accent px-3 py-2 text-sm font-medium">
                                Content Generator
                            </a>
                            <a href="/automation.html" class="text-text-primary hover:text-accent px-3 py-2 text-sm font-medium">
                                Automation
                            </a>
                            <a href="/manual-post.html" class="text-text-primary hover:text-accent px-3 py-2 text-sm font-medium">
                                Manual Post
                            </a>
                            <a href="/pricing.html" class="text-accent border-b-2 border-accent px-3 py-2 text-sm font-medium">
                                Pricing
                            </a>
                        </div>
                    </div>
                    
                    <!-- Authentication buttons -->
                    <div class="flex items-center" id="authSection">
                        <div id="loginSection">
                            <a href="/auth/linkedin" class="bg-white text-text-primary px-6 py-2 rounded-button shadow-subtle hover:shadow-md transition-shadow duration-200 text-sm font-medium">
                                Connect to LinkedIn
                            </a>
                        </div>
                        
                        <div id="userSection" style="display: none;">
                            <div class="flex items-center space-x-4">
                                <div class="relative">
                                    <button id="userDropdownBtn" class="flex items-center space-x-2 hover:bg-gray-50 px-2 py-1 rounded-button transition-colors duration-200">
                                        <img id="userProfilePic" src="" alt="Profile" class="h-8 w-8 rounded-full" style="display: none;">
                                        <div class="h-8 w-8 rounded-full bg-accent flex items-center justify-center text-white" id="userInitials">
                                            U
                                        </div>
                                        <span class="text-sm font-medium text-text-primary" id="userName">User</span>
                                        <svg class="w-4 h-4 text-text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                        </svg>
                                    </button>
                                    
                                    <!-- Dropdown Menu -->
                                    <div id="userDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-button shadow-lg border z-50 hidden">
                                        <div class="py-1">
                                            <a href="/preferences.html" class="block px-4 py-2 text-sm text-text-primary hover:bg-gray-50">
                                                ⚙️ Edit Preferences
                                            </a>
                                            <hr class="my-1">
                                            <button data-action="logout" class="block w-full text-left px-4 py-2 text-sm text-text-primary hover:bg-gray-50">
                                                🚪 Sign Out
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

            <!-- Hero Section -->
            <div class="hero-gradient text-white py-16">
                <div class="max-w-6xl mx-auto text-center px-6">
                    <h1 class="text-5xl font-bold mb-6">Buy Credits</h1>
                    <p class="text-xl text-gray-300 mb-8 max-w-3xl mx-auto">
                        Purchase credits for your LinkedIn content generation - no subscriptions, no commitments
                    </p>
                    <div class="inline-flex items-center gap-2 bg-blue-600/20 border border-blue-400/30 rounded-full px-6 py-3">
                        <span class="text-2xl">💳</span>
                        <span class="font-semibold">Simple Credit System - Pay Once, Use Anytime</span>
                    </div>
                    

                </div>
            </div>

            <!-- Tab Container -->
            <div class="tab-container" style="display: none;">
                <button class="tab-button" onclick="switchTab('subscriptions')">Monthly Plans</button>
                <button class="tab-button active" onclick="switchTab('credits')">Buy Credits</button>
            </div>

            <!-- Subscription Plans Section -->
            <div id="subscriptions" class="pricing-section" style="display: none;">
                <div class="pricing-grid">
                    <!-- Starter Plan -->
                    <div class="pricing-card rounded-2xl p-8 text-center">
                        <div class="mb-6">
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">Starter</h3>
                            <p class="text-gray-600">Perfect for individuals</p>
                        </div>
                        
                        <div class="mb-8">
                            <div class="price-amount text-5xl font-bold mb-2">$0.49</div>
                            <div class="text-gray-500">per month</div>
                        </div>
                        
                        <div class="mb-8">
                            <div class="text-3xl font-bold text-blue-600 mb-2">30 Credits</div>
                            <div class="text-gray-500">Every month • Auto-renewed</div>
                        </div>
                        
                        <ul class="text-left mb-8 space-y-3">
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>AI post generation</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Viral format templates</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Content automation</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>LinkedIn direct posting</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Email support</span>
                            </li>
                        </ul>
                        
                        <button onclick="startSubscription('starter')" 
                           class="upgrade-btn w-full py-4 text-white font-bold rounded-xl block text-center">
                            Start Monthly Plan
                        </button>
                    </div>
                    
                    <!-- Professional Plan -->
                    <div class="pricing-card popular rounded-2xl p-8 text-center">
                        <div class="plan-badge">Most Popular</div>
                        <div class="mb-6">
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">Professional</h3>
                            <p class="text-gray-600">Best for professionals</p>
                        </div>
                        
                        <div class="mb-8">
                            <div class="price-amount text-5xl font-bold mb-2">$1.49</div>
                            <div class="text-gray-500">per month</div>
                        </div>
                        
                        <div class="mb-8">
                            <div class="text-3xl font-bold text-blue-600 mb-2">100 Credits</div>
                            <div class="text-gray-500">Every month • Auto-renewed</div>
                        </div>
                        
                        <ul class="text-left mb-8 space-y-3">
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Everything in Starter</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Advanced AI models</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Content scheduling</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Analytics dashboard</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Priority support</span>
                            </li>
                        </ul>
                        
                        <button onclick="startSubscription('professional')" 
                           class="upgrade-btn popular w-full py-4 text-white font-bold rounded-xl block text-center">
                            Start Monthly Plan
                        </button>
                    </div>
                    
                    <!-- Business Plan -->
                    <div class="pricing-card rounded-2xl p-8 text-center">
                        <div class="mb-6">
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">Business</h3>
                            <p class="text-gray-600">For teams and agencies</p>
                        </div>
                        
                        <div class="mb-8">
                            <div class="price-amount text-5xl font-bold mb-2">$2.49</div>
                            <div class="text-gray-500">per month</div>
                        </div>
                        
                        <div class="mb-8">
                            <div class="text-3xl font-bold text-blue-600 mb-2">300 Credits</div>
                            <div class="text-gray-500">Every month • Auto-renewed</div>
                        </div>
                        
                        <ul class="text-left mb-8 space-y-3">
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Everything in Professional</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Team collaboration</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Advanced automation</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Custom templates</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Dedicated support</span>
                            </li>
                        </ul>
                        
                        <button onclick="startSubscription('business')" 
                           class="upgrade-btn w-full py-4 text-white font-bold rounded-xl block text-center">
                            Start Monthly Plan
                        </button>
                    </div>
                </div>
            </div>

            <!-- One-time Credit Purchase Section -->
            <div id="credits" class="pricing-section active">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold mb-4">Buy Credits Once</h2>
                    <p class="text-gray-600">Perfect for occasional users or to top up your account</p>
                </div>
                
                <div class="pricing-grid">
                    <!-- Small Pack -->
                    <div class="pricing-card rounded-2xl p-8 text-center">
                        <div class="mb-6">
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">Small Pack</h3>
                            <p class="text-gray-600">Great for trying out</p>
                        </div>
                        
                        <div class="mb-8">
                            <div class="price-amount text-5xl font-bold mb-2">$0.49</div>
                            <div class="text-gray-500">one-time payment</div>
                        </div>
                        
                        <div class="mb-8">
                            <div class="text-3xl font-bold text-blue-600 mb-2">25 Credits</div>
                            <div class="text-gray-500">Never expire • Use anytime</div>
                        </div>
                        
                        <ul class="text-left mb-8 space-y-3">
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>All features included</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>No monthly commitment</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Credits never expire</span>
                            </li>
                        </ul>
                        
                        <button onclick="openCreditPurchase('small', 25, 0.49)" 
                           class="upgrade-btn w-full py-4 text-white font-bold rounded-xl block text-center">
                            Buy 25 Credits
                        </button>
                    </div>
                    
                    <!-- Medium Pack -->
                    <div class="pricing-card popular rounded-2xl p-8 text-center">
                        <div class="plan-badge">Best Value</div>
                        <div class="mb-6">
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">Medium Pack</h3>
                            <p class="text-gray-600">Most popular choice</p>
                        </div>
                        
                        <div class="mb-8">
                            <div class="price-amount text-5xl font-bold mb-2">$1.49</div>
                            <div class="text-gray-500">one-time payment</div>
                        </div>
                        
                        <div class="mb-8">
                            <div class="text-3xl font-bold text-blue-600 mb-2">75 Credits</div>
                            <div class="text-gray-500">Never expire • Use anytime</div>
                        </div>
                        
                        <ul class="text-left mb-8 space-y-3">
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>All features included</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>No monthly commitment</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Credits never expire</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Better value per credit</span>
                            </li>
                        </ul>
                        
                        <button onclick="openCreditPurchase('medium', 75, 1.49)" 
                           class="upgrade-btn popular w-full py-4 text-white font-bold rounded-xl block text-center">
                            Buy 75 Credits
                        </button>
                    </div>
                    
                    <!-- Large Pack -->
                    <div class="pricing-card rounded-2xl p-8 text-center">
                        <div class="mb-6">
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">Large Pack</h3>
                            <p class="text-gray-600">Maximum savings</p>
                        </div>
                        
                        <div class="mb-8">
                            <div class="price-amount text-5xl font-bold mb-2">$2.49</div>
                            <div class="text-gray-500">one-time payment</div>
                        </div>
                        
                        <div class="mb-8">
                            <div class="text-3xl font-bold text-blue-600 mb-2">200 Credits</div>
                            <div class="text-gray-500">Never expire • Use anytime</div>
                        </div>
                        
                        <ul class="text-left mb-8 space-y-3">
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>All features included</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>No monthly commitment</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Credits never expire</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="feature-checkmark">✓</span>
                                <span>Best value per credit</span>
                            </li>
                        </ul>
                        
                        <button onclick="openCreditPurchase('large', 200, 2.49)" 
                           class="upgrade-btn w-full py-4 text-white font-bold rounded-xl block text-center">
                            Buy 200 Credits
                        </button>
                    </div>
                </div>
            </div>

            <!-- Credit Purchase Modal -->
            <div id="creditModal" class="credit-modal">
                <div class="credit-modal-content">
                    <span class="credit-modal-close">&times;</span>
                    <h2 id="creditModalTitle" class="text-2xl font-bold mb-4">Confirm Credit Purchase</h2>
                    <div id="creditModalContent">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                    <div class="mt-6 flex gap-4">
                        <button id="confirmCreditPurchase" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                            Confirm Purchase
                        </button>
                        <button onclick="closeCreditModal()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-3 px-6 rounded-lg transition-colors">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>

            <!-- Features Section -->
            <div class="feature-grid mt-20">
                <div class="text-center p-6 bg-white rounded-xl border border-gray-200">
                    <div class="text-4xl mb-4">🤖</div>
                    <h3 class="font-bold text-xl mb-2">AI-Powered Generation</h3>
                    <p class="text-gray-600">Advanced AI creates engaging, professional LinkedIn content tailored to your industry and audience.</p>
                </div>
                
                <div class="text-center p-6 bg-white rounded-xl border border-gray-200">
                    <div class="text-4xl mb-4">📰</div>
                    <h3 class="font-bold text-xl mb-2">Real-Time News</h3>
                    <p class="text-gray-600">Stay relevant with posts based on the latest industry news and trending topics in your field.</p>
                </div>
                
                <div class="text-center p-6 bg-white rounded-xl border border-gray-200">
                    <div class="text-4xl mb-4">📅</div>
                    <h3 class="font-bold text-xl mb-2">Smart Scheduling</h3>
                    <p class="text-gray-600">Automatically post at optimal times for maximum engagement and reach on LinkedIn.</p>
                </div>
            </div>
            
            <!-- FAQ Section -->
            <div class="mt-20 text-center">
                <h2 class="text-3xl font-bold mb-8">Frequently Asked Questions</h2>
                <div class="max-w-3xl mx-auto text-left space-y-6">
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="font-bold mb-2">What's the difference between subscriptions and credit packs?</h3>
                        <p class="text-gray-600">Subscriptions give you credits every month at the best rates, while credit packs are one-time purchases that never expire. Subscriptions offer much better value for regular users.</p>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="font-bold mb-2">Do credits expire?</h3>
                        <p class="text-gray-600">Subscription credits reset monthly. One-time credit pack purchases never expire - use them whenever you want!</p>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="font-bold mb-2">Can I combine subscriptions with credit packs?</h3>
                        <p class="text-gray-600">Absolutely! Your total credit balance includes both subscription credits and any credit packs you've purchased.</p>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-6">
                        <h3 class="font-bold mb-2">Is my LinkedIn account safe?</h3>
                        <p class="text-gray-600">Absolutely. We use LinkedIn's official API and follow all security best practices. Your account credentials are never stored.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isAuthenticated = false;
        let currentUser = null;
        let selectedCreditPack = null;
        
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            checkPurchaseSuccess();
        });
        
        function switchTab(tab) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update sections
            document.querySelectorAll('.pricing-section').forEach(section => section.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
        }
        
        function openCreditPurchase(packType, credits, price) {
            if (!isAuthenticated) {
                alert('Please sign in with LinkedIn first to purchase credits.');
                return;
            }
            
            selectedCreditPack = { packType, credits, price };
            
            document.getElementById('creditModalTitle').textContent = `${packType.charAt(0).toUpperCase() + packType.slice(1)} Pack Purchase`;
            document.getElementById('creditModalContent').innerHTML = `
                <div class="text-center">
                    <div class="text-4xl mb-4">💳</div>
                    <h3 class="text-xl font-semibold mb-2">${credits} Credits</h3>
                    <p class="text-gray-600 mb-4">One-time payment • Credits never expire</p>
                    <div class="text-3xl font-bold text-blue-600">$${price}</div>
                </div>
            `;
            
            document.getElementById('creditModal').style.display = 'block';
        }
        
        function closeCreditModal() {
            document.getElementById('creditModal').style.display = 'none';
            selectedCreditPack = null;
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('creditModal');
            if (event.target == modal) {
                closeCreditModal();
            }
        }
        
        // Close modal with X button
        document.querySelector('.credit-modal-close').onclick = closeCreditModal;
        
        document.getElementById('confirmCreditPurchase').onclick = async function() {
            if (!selectedCreditPack) return;
            
            try {
                // Use integrated checkout instead of Payment Links
                const response = await fetch('/api/credits/create-checkout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        credits: selectedCreditPack.credits,
                        pack_type: selectedCreditPack.packType
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Redirect to Stripe Checkout
                    window.location.href = data.url;
                } else {
                    console.error('Checkout creation failed:', data.error);
                    alert('Failed to create checkout session. Please try again.');
                }
            } catch (error) {
                console.error('Error creating checkout:', error);
                alert('Failed to process purchase. Please try again.');
            }
        };
        
        function checkPurchaseSuccess() {
            const urlParams = new URLSearchParams(window.location.search);
            const success = urlParams.get('success');
            const credits = urlParams.get('credits');
            
            if (success === 'true' && credits) {
                showSuccessMessage(`🎉 Success! ${credits} credits have been added to your account.`);
                // Clean up URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        }
        
        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'bg-green-50 border border-green-200 rounded-lg p-4 mb-6 text-center';
            successDiv.innerHTML = `
                <div class="text-green-800 font-semibold">${message}</div>
                <div class="text-green-600 text-sm mt-1">You can now generate content!</div>
            `;
            
            // Insert after hero section
            const heroSection = document.querySelector('.hero-gradient');
            heroSection.parentNode.insertBefore(successDiv, heroSection.nextSibling);
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                successDiv.remove();
            }, 10000);
        }
        
        async function checkAuthStatus() {
            try {
                const response = await fetch('/api/auth-status');
                const data = await response.json();
                
                if (data.authenticated && data.user) {
                    isAuthenticated = true;
                    currentUser = data.user;
                    
                    // Update auth section (if it exists)
                    const authButton = document.getElementById('authButton');
                    if (authButton) {
                        authButton.textContent = 'Dashboard';
                        authButton.onclick = () => window.location.href = '/dashboard';
                    }
                    
                    // Show credit balance if available
                    if (currentUser.credits !== undefined) {
                        const creditElement = document.getElementById('creditCount');
                        const navCreditsElement = document.getElementById('navCredits');
                        
                        if (creditElement) {
                            creditElement.textContent = currentUser.credits;
                        }
                        if (navCreditsElement) {
                            navCreditsElement.style.display = 'block';
                        }
                    }
                    
                    // Check subscription status
                    await checkSubscriptionStatus();
                    
                    // Update payment links with user data
                    setTimeout(updatePaymentLinks, 100);
                } else {
                    const authButton = document.getElementById('authButton');
                    if (authButton) {
                        authButton.onclick = () => window.location.href = '/auth/linkedin';
                    }
                }
            } catch (error) {
                console.error('Error checking auth status:', error);
            }
        }
        
        function updatePaymentLinks() {
            if (!currentUser || !currentUser.email || !currentUser.id) {
                return;
            }
            
            // Find and update all Stripe payment links
            document.querySelectorAll('a[href*="stripe.com"]').forEach(link => {
                let href = link.href;
                
                // Replace placeholders with actual user data
                href = href.replace(/\{\{USER_EMAIL\}\}/g, encodeURIComponent(currentUser.email));
                href = href.replace(/\{\{USER_ID\}\}/g, currentUser.id);
                
                link.href = href;
            });
        }
        
        let currentSubscription = null;

        async function checkSubscriptionStatus() {
            if (!isAuthenticated) return;
            
            try {
                const response = await fetch('/api/subscription/status');
                const data = await response.json();
                
                if (data.hasActiveSubscription) {
                    currentSubscription = data.subscription;
                    updateSubscriptionButtons();
                }
            } catch (error) {
                console.error('Error checking subscription status:', error);
            }
        }

        function updateSubscriptionButtons() {
            if (!currentSubscription) return;
            
            const currentPlan = currentSubscription.planName.toLowerCase();
            
            // Update all subscription buttons based on current plan
            const plans = ['starter', 'professional', 'business'];
            
            plans.forEach(planName => {
                const button = document.querySelector(`[onclick*="startSubscription('${planName}')"]`);
                if (!button) return;
                
                if (planName === currentPlan) {
                    // Current plan - show as active
                    button.textContent = '✅ Current Plan';
                    button.style.backgroundColor = '#10B981';
                    button.style.cursor = 'default';
                    button.onclick = null;
                } else {
                    // Other plans - show upgrade/downgrade
                    const isUpgrade = plans.indexOf(planName) > plans.indexOf(currentPlan);
                    button.textContent = isUpgrade ? `⬆️ Upgrade to ${capitalize(planName)}` : `⬇️ Downgrade to ${capitalize(planName)}`;
                    button.onclick = () => changeSubscription(planName);
                }
            });
            
            // Show subscription management info
            showSubscriptionInfo();
        }

        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function showSubscriptionInfo() {
            const infoDiv = document.createElement('div');
            infoDiv.className = 'bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 text-center';
            infoDiv.innerHTML = `
                <div class="text-blue-800 font-semibold">
                    🎉 You're subscribed to the ${capitalize(currentSubscription.planName)} plan!
                </div>
                <div class="text-blue-600 text-sm mt-1">
                    You get monthly credits automatically. Next billing: ${new Date(currentSubscription.currentPeriodEnd).toLocaleDateString()}
                </div>
                <div class="mt-3">
                    <a href="/manage-subscription" class="text-blue-600 hover:text-blue-800 font-medium">
                        Manage Subscription →
                    </a>
                </div>
            `;
            
            // Insert after hero section if not already present
            const heroSection = document.querySelector('.hero-gradient');
            const existingInfo = document.querySelector('.subscription-info');
            if (heroSection && !existingInfo) {
                infoDiv.classList.add('subscription-info');
                heroSection.parentNode.insertBefore(infoDiv, heroSection.nextSibling);
            }
        }

        async function changeSubscription(newPlanName) {
            if (!currentSubscription) {
                return startSubscription(newPlanName);
            }
            
            const confirmMessage = `Change your subscription from ${capitalize(currentSubscription.planName)} to ${capitalize(newPlanName)}?\n\nThis will prorate your billing and update your monthly credits.`;
            
            if (!confirm(confirmMessage)) {
                return;
            }
            
            // For now, redirect to manage subscription page for plan changes
            // In the future, you could implement direct plan changes via Stripe API
            alert('Please use the "Manage Subscription" link to change your plan, or contact support for assistance.');
            window.location.href = '/manage-subscription';
        }

        async function startSubscription(planName) {
            if (!isAuthenticated) {
                alert('Please sign in with LinkedIn first to purchase a subscription.');
                window.location.href = '/auth/linkedin';
                return;
            }
            
            // Check if user already has active subscription
            if (currentSubscription) {
                changeSubscription(planName);
                return;
            }
            
            // Map plan names to their Stripe price IDs
            const planPriceIds = {
                'starter': 'price_1RXyydKkxlEtPdqxDr6cuYqJ',
                'professional': 'price_1RXelRKkxlEtPdqxrGxYu3Bp',
                'business': 'price_1RXelRKkxlEtPdqxveicYc5e'
            };
            
            const priceId = planPriceIds[planName.toLowerCase()];
            if (!priceId) {
                console.error('Invalid plan name:', planName);
                alert('Invalid subscription plan. Please try again.');
                return;
            }
            
            try {
                const response = await fetch('/api/subscription/checkout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        priceId: priceId
                    })
                });
                
                const data = await response.json();
                
                if (response.ok && data.url) {
                    // Redirect to Stripe Checkout
                    window.location.href = data.url;
                } else {
                    console.error('Subscription checkout failed:', data.error || data);
                    alert('Failed to create subscription checkout. Please try again.');
                }
            } catch (error) {
                console.error('Error creating subscription checkout:', error);
                alert('Failed to process subscription. Please try again.');
            }
        }

        function checkAuthForPurchase(element, planName, credits, price) {
            if (!isAuthenticated) {
                alert('Please sign in with LinkedIn first to purchase a subscription.');
                element.href = '/auth/linkedin';
                return false;
            }
            
            // Analytics tracking
            if (typeof gtag !== 'undefined') {
                gtag('event', 'begin_checkout', {
                    currency: 'USD',
                    value: price,
                    items: [{
                        item_id: planName,
                        item_name: `${planName} Plan`,
                        category: 'Subscription',
                        quantity: 1,
                        price: price
                    }]
                });
            }
            
            return true;
        }
        
        // Initialize authentication check using the main app
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('🏗️ Initializing Employment app for pricing page...');
            if (typeof EmploymentApp !== 'undefined') {
                const app = new EmploymentApp();
                window.app = app;
            }
        });
    </script>
</body>
</html> 